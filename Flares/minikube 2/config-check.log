=== container check ===
Configuration provider: file
Configuration source: file:/etc/datadog-agent/conf.d/container.d/conf.yaml.default
Instance ID: container:d884b5186b651429
{}
~
Auto-discovery IDs:
* _container
===
=== coredns check ===
Configuration provider: file
Configuration source: file:/etc/datadog-agent/conf.d/coredns.d/auto_conf.yaml
Instance ID: coredns:7151759ebea2ff5c
prometheus_url: http://172.17.0.4:9153/metrics
tags:
- kube_namespace:kube-system
- docker_image:k8s.gcr.io/coredns/coredns:v1.8.6
- image_id:********@sha256:5b6ec0d6de9baaf3e92d0f66cd96a25b9edbce8716f5f15dcd1a616b3abd590e
- image_name:k8s.gcr.io/coredns/coredns
- kube_priority_class:system-cluster-critical
- kube_service:kube-dns
- short_image:coredns
- kube_ownerref_kind:replicaset
- pod_phase:running
- image_tag:v1.8.6
- kube_replica_set:coredns-64897985d
- kube_container_name:coredns
- dns-pod:172.17.0.4
- kube_deployment:coredns
~
Auto-discovery IDs:
* coredns
===
=== cpu check ===
Configuration provider: file
Configuration source: file:/etc/datadog-agent/conf.d/cpu.d/conf.yaml.default
Instance ID: cpu:d884b5186b651429
{}
~
===
=== datadog_cluster_agent check ===
Configuration provider: file
Configuration source: file:/etc/datadog-agent/conf.d/datadog_cluster_agent.d/auto_conf.yaml
Instance ID: datadog_cluster_agent:19d65ec159b29853
prometheus_url: http://172.17.0.8:5000/metrics
tags:
- kube_replica_set:release-datadog-cluster-agent-64d6cb7695
- image_tag:1.18.0
- short_image:cluster-agent
- kube_app_instance:release
- kube_app_managed_by:Helm
- kube_namespace:default
- image_name:gcr.io/datadoghq/cluster-agent
- kube_deployment:release-datadog-cluster-agent
- image_id:********@sha256:e6f5d92345a28f5d39996cd5d3e6372bf649aee8ee7e1ac5ac09829504600d6d
- kube_service:release-datadog-cluster-agent
- pod_phase:running
- kube_ownerref_kind:replicaset
- kube_app_name:release-datadog
- kube_container_name:cluster-agent
- kube_app_component:cluster-agent
- docker_image:gcr.io/datadoghq/cluster-agent:1.18.0
~
Auto-discovery IDs:
* cluster-agent
===
=== disk check ===
Configuration provider: file
Configuration source: file:/etc/datadog-agent/conf.d/disk.d/conf.yaml.default
Instance ID: disk:e5dffb8bef24336f
use_mount: false
~
===
=== docker check ===
Configuration provider: file
Configuration source: file:/etc/datadog-agent/conf.d/docker.d/conf.yaml.default
Instance ID: docker:d884b5186b651429
{}
~
Auto-discovery IDs:
* _docker
===
=== etcd check ===
Configuration provider: file
Configuration source: file:/etc/datadog-agent/conf.d/etcd.d/auto_conf.yaml
Instance ID: etcd:4035764fe5b52246
possible_prometheus_urls:
- https://192.168.49.2:2379/metrics
- http://192.168.49.2:2379/metrics
ssl_verify: false
tags:
- kube_container_name:etcd
- image_tag:3.5.1-0
- image_id:********@sha256:64b9ea357325d5db9f8a723dcf503b5a449177b17ac87d69481e126bb724c263
- kube_namespace:kube-system
- docker_image:k8s.gcr.io/etcd:3.5.1-0
- image_name:k8s.gcr.io/etcd
- short_image:etcd
- pod_phase:running
- kube_priority_class:system-node-critical
~
Auto-discovery IDs:
* etcd
===
=== file_handle check ===
Configuration provider: file
Configuration source: file:/etc/datadog-agent/conf.d/file_handle.d/conf.yaml.default
Instance ID: file_handle:d884b5186b651429
{}
~
===
=== io check ===
Configuration provider: file
Configuration source: file:/etc/datadog-agent/conf.d/io.d/conf.yaml.default
Instance ID: io:d884b5186b651429
{}
~
===
=== kube_apiserver_metrics check ===
Configuration provider: file
Configuration source: file:/etc/datadog-agent/conf.d/kube_apiserver_metrics.d/auto_conf.yaml
Instance ID: kube_apiserver_metrics:cd39f757004b465c
bearer_token_auth: tls_only
possible_prometheus_urls:
- https://192.168.49.2:6443/metrics
- https://192.168.49.2:8443/metrics
tags:
- image_name:k8s.gcr.io/kube-apiserver
- short_image:kube-apiserver
- kube_namespace:kube-system
- pod_phase:running
- kube_priority_class:system-node-critical
- docker_image:k8s.gcr.io/kube-apiserver:v1.23.3
- apiserver:192.168.49.2
- kube_container_name:kube-apiserver
- image_tag:v1.23.3
- image_id:********@sha256:b8eba88862bab7d3d7cdddad669ff1ece006baa10d3a3df119683434497a0949
~
Auto-discovery IDs:
* kube-apiserver
===
=== kube_controller_manager check ===
Configuration provider: file
Configuration source: file:/etc/datadog-agent/conf.d/kube_controller_manager.d/auto_conf.yaml
Instance ID: kube_controller_manager:7b42129a69cfcb23
bearer_token_auth: tls_only
possible_prometheus_urls:
- https://192.168.49.2:10257/metrics
- https://localhost:10257/metrics
- http://192.168.49.2:10252/metrics
- http://localhost:10252/metrics
ssl_verify: false
tags:
- image_tag:v1.23.3
- image_id:********@sha256:b721871d9a9c55836cbcbb2bf375e02696260628f73620b267be9a9a50c97f5a
- kube_namespace:kube-system
- docker_image:k8s.gcr.io/kube-controller-manager:v1.23.3
- image_name:k8s.gcr.io/kube-controller-manager
- short_image:kube-controller-manager
- kube_container_name:kube-controller-manager
- pod_phase:running
- kube_priority_class:system-node-critical
~
Auto-discovery IDs:
* kube-controller-manager
===
=== kube_scheduler check ===
Configuration provider: file
Configuration source: file:/etc/datadog-agent/conf.d/kube_scheduler.d/auto_conf.yaml
Instance ID: kube_scheduler:9be0cb7402dbceff
bearer_token_auth: tls_only
possible_prometheus_urls:
- https://192.168.49.2:10259/metrics
- https://localhost:10259/metrics
- http://192.168.49.2:10251/metrics
- http://localhost:10251/metrics
ssl_verify: false
tags:
- pod_phase:running
- short_image:kube-scheduler
- image_tag:v1.23.3
- image_id:********@sha256:32308abe86f7415611ca86ee79dd0a73e74ebecb2f9e3eb85fc3a8e62f03d0e7
- kube_namespace:kube-system
- docker_image:k8s.gcr.io/kube-scheduler:v1.23.3
- kube_priority_class:system-node-critical
- kube_container_name:kube-scheduler
- image_name:k8s.gcr.io/kube-scheduler
~
Auto-discovery IDs:
* kube-scheduler
===
=== kubelet check ===
Configuration provider: file
Configuration source: file:/etc/datadog-agent/conf.d/kubelet.d/conf.yaml.default
Instance ID: kubelet:5bbc63f3938c02f4
min_collection_interval: 20
~
Auto-discovery IDs:
* _kubelet
===
=== kubernetes_state check ===
Configuration provider: file
Configuration source: file:/etc/datadog-agent/conf.d/kubernetes_state.d/auto_conf.yaml
Instance ID: kubernetes_state:a600c68b82b5b637
kube_state_url: http://172.17.0.5:8080/metrics
~
Auto-discovery IDs:
* kube-state-metrics
===
=== load check ===
Configuration provider: file
Configuration source: file:/etc/datadog-agent/conf.d/load.d/conf.yaml.default
Instance ID: load:d884b5186b651429
{}
~
===
=== memory check ===
Configuration provider: file
Configuration source: file:/etc/datadog-agent/conf.d/memory.d/conf.yaml.default
Instance ID: memory:d884b5186b651429
{}
~
===
=== network check ===
Configuration provider: file
Configuration source: file:/etc/datadog-agent/conf.d/network.d/conf.yaml.default
Instance ID: network:d884b5186b651429
{}
~
===
=== ntp check ===
Configuration provider: file
Configuration source: file:/etc/datadog-agent/conf.d/ntp.d/conf.yaml.default
Instance ID: ntp:d884b5186b651429
{}
~
===
=== openmetrics check ===
Configuration provider: kubernetes
Configuration source: kubelet:docker://510637a081cb2976e32d893402e782eb490db718b0329ccfb250c1c0f2987e55
Instance ID: openmetrics:namespace1:cc46577d11df5c72
metrics:
- promhttp_metric_handler_requests_total: prometheus.handler.requests.total
- go*
- prometheus_tsdb*
namespace: namespace1
prometheus_url: http://172.17.0.10:9090/metrics
tags:
- kube_deployment:prometheus
- short_image:prometheus
- kube_service:apache-exporter
- docker_image:prom/prometheus:latest
- kube_container_name:prometheus
- pod_phase:running
- kube_service:prometheus-example-service
- kube_service:pa-service
- image_id:********@sha256:b37103e03399e90c9b7b1b2940894d3634915cf9df4aa2e5402bd85b4377808c
- kube_service:prometheus-deployment
- kube_service:prometheus-service
- kube_namespace:default
- image_tag:latest
- kube_replica_set:prometheus-65d8cd6c4
- image_name:prom/prometheus
- kube_ownerref_kind:replicaset
~
Init Config:
{}
Auto-discovery IDs:
* docker://510637a081cb2976e32d893402e782eb490db718b0329ccfb250c1c0f2987e55
===
=== openmetrics check ===
Configuration provider: cluster-checks
Configuration source: prometheus_services:kube_service://kube-system/kube-dns
Instance ID: openmetrics:4b941f9c081274e3
empty_default_hostname: true
metrics:
- '*'
namespace: ""
prometheus_url: http://10.96.0.10:9153/metrics
tags:
- kube_service:kube-dns
- kube_namespace:kube-system
~
Init Config:
{}
===
=== openmetrics check ===
Configuration provider: kubernetes
Configuration source: kubelet:docker://d40b0762921faed13cafd98d517a8857fffe964c889e1fe1ed11f6bf7bf00ffb
Instance ID: openmetrics:namespace1:269c209a326ac5d6
metrics:
- promhttp_metric_handler_requests_total: prometheus.handler.requests.total
- go*
- prometheus_tsdb*
namespace: namespace1
prometheus_url: http://172.17.0.9:9090/metrics
tags:
- kube_service:prometheus-example-service
- image_name:prom/prometheus
- kube_service:prometheus-service
- kube_service:prometheus-deployment
- kube_container_name:prometheus
- image_id:********@sha256:b37103e03399e90c9b7b1b2940894d3634915cf9df4aa2e5402bd85b4377808c
- kube_service:apache-exporter
- image_tag:latest
- kube_deployment:prometheus-deployment
- kube_replica_set:prometheus-deployment-65d8cd6c4
- pod_phase:running
- docker_image:prom/prometheus:latest
- kube_service:pa-service
- kube_ownerref_kind:replicaset
- short_image:prometheus
- kube_namespace:default
~
Init Config:
{}
Auto-discovery IDs:
* docker://d40b0762921faed13cafd98d517a8857fffe964c889e1fe1ed11f6bf7bf00ffb
===
=== openmetrics check ===
Configuration provider: kubernetes
Configuration source: kubelet:docker://8e17525d6576b415aa227aaa3a39c24790263cd0f67abea407a839ccdf158159
Instance ID: openmetrics:979d31084c5a217b
prometheus_url: http://172.17.0.2:9090/metrics
tags:
- kube_container_name:prometheus-apache
- image_name:prom/prometheus
- short_image:prometheus
- image_tag:latest
- image_id:********@sha256:b37103e03399e90c9b7b1b2940894d3634915cf9df4aa2e5402bd85b4377808c
- docker_image:prom/prometheus:latest
- kube_namespace:default
- pod_phase:running
~
Init Config:
{}
Auto-discovery IDs:
* docker://8e17525d6576b415aa227aaa3a39c24790263cd0f67abea407a839ccdf158159
===
=== openmetrics check ===
Configuration provider: kubernetes
Configuration source: kubelet:docker://46ae29ac153166a0a4ccaed4b46226bb7f6b7ec22d71503553bd451b0da8abe7
Instance ID: openmetrics:61aa850cda27258a
prometheus_url: http://172.17.0.7:9090/metrics
tags:
- image_id:********@sha256:b37103e03399e90c9b7b1b2940894d3634915cf9df4aa2e5402bd85b4377808c
- docker_image:prom/prometheus:latest
- pod_phase:running
- kube_namespace:default
- kube_container_name:prometheus-apache
- image_name:prom/prometheus
- short_image:prometheus
- image_tag:latest
~
Init Config:
{}
Auto-discovery IDs:
* docker://46ae29ac153166a0a4ccaed4b46226bb7f6b7ec22d71503553bd451b0da8abe7
===
=== openmetrics check ===
Configuration provider: cluster-checks
Configuration source: prometheus_services:kube_service://default/release-kube-state-metrics
Instance ID: openmetrics:a62d145c0e6f0970
empty_default_hostname: true
metrics:
- '*'
namespace: ""
prometheus_url: http://10.106.20.73:8080/metrics
tags:
- kube_namespace:default
- kube_service:release-kube-state-metrics
~
Init Config:
{}
===
=== redisdb check ===
Configuration provider: kubernetes
Configuration source: kubelet:docker://b54efcf1cce513714644d4f8e1e7b71a27e7584925d7df09a542afeca4ba9c58
Instance ID: redisdb:a368964ca116cc93
host: 172.17.0.3
port: "6379"
tags:
- image_name:redis
- short_image:redis
- docker_image:redis:latest
- image_tag:latest
- image_id:********@sha256:69a3ab2516b560690e37197b71bc61ba245aafe4525ebdece1d8a0bc5669e3e2
- kube_namespace:default
- pod_phase:running
- kube_container_name:redis
~
Init Config:
{}
Auto-discovery IDs:
* docker://b54efcf1cce513714644d4f8e1e7b71a27e7584925d7df09a542afeca4ba9c58
===
=== uptime check ===
Configuration provider: file
Configuration source: file:/etc/datadog-agent/conf.d/uptime.d/conf.yaml.default
Instance ID: uptime:d884b5186b651429
{}
~
===
=== Resolve warnings ===
couch
* No service found with this AD identifier: couchdb
* Can't resolve the template for couch at this moment.
kyototycoon
* No service found with this AD identifier: kyototycoon
* Can't resolve the template for kyototycoon at this moment.
mcache
* No service found with this AD identifier: memcached
* Can't resolve the template for mcache at this moment.
riak
* No service found with this AD identifier: riak
* Can't resolve the template for riak at this moment.
apache
* No service found with this AD identifier: httpd
* Can't resolve the template for apache at this moment.
cilium
* No service found with this AD identifier: cilium-agent
* No service found with this AD identifier: cilium
* Can't resolve the template for cilium at this moment.
consul
* No service found with this AD identifier: consul
* Can't resolve the template for consul at this moment.
containerd
* No service found with this AD identifier: _containerd
* Can't resolve the template for containerd at this moment.
istio
* No service found with this AD identifier: proxyv2
* Can't resolve the template for istio at this moment.
presto
* No service found with this AD identifier: presto
* Can't resolve the template for presto at this moment.
couchbase
* No service found with this AD identifier: couchbase
* Can't resolve the template for couchbase at this moment.
elastic
* No service found with this AD identifier: elasticsearch
* No service found with this AD identifier: elasticsearch-oss
* Can't resolve the template for elastic at this moment.
external_dns
* No service found with this AD identifier: external-dns
* Can't resolve the template for external_dns at this moment.
harbor
* No service found with this AD identifier: nginx-photon
* Can't resolve the template for harbor at this moment.
kube_dns
* No service found with this AD identifier: kubedns-amd64
* No service found with this AD identifier: k8s-dns-kube-dns-amd64
* Can't resolve the template for kube_dns at this moment.
tomcat
* No service found with this AD identifier: tomcat
* Can't resolve the template for tomcat at this moment.
cri
* No service found with this AD identifier: _cri
* Can't resolve the template for cri at this moment.
ecs_fargate
* No service found with this AD identifier: _ecs_fargate
* Can't resolve the template for ecs_fargate at this moment.
eks_fargate
* No service found with this AD identifier: _eks_fargate
* Can't resolve the template for eks_fargate at this moment.
snmp
* No service found with this AD identifier: snmp
* Can't resolve the template for snmp at this moment.
=== Unresolved Configs ===
Auto-discovery IDs: docker://b54efcf1cce513714644d4f8e1e7b71a27e7584925d7df09a542afeca4ba9c58
Templates:
check_name: redisdb
init_config: {}
instances:
- host: '%%host%%'
  port: "6379"
logs_config: null
Auto-discovery IDs: presto
Templates:
check_name: presto
init_config:
  collect_default_metrics: true
  conf:
  - include:
      attribute:
        AbandonedQueries.OneMinute.Count:
          alias: presto.execution.abandoned_queries.one_minute.count
        AbandonedQueries.OneMinute.Rate:
          alias: presto.execution.abandoned_queries.one_minute.rate
        AbandonedQueries.TotalCount:
          alias: presto.execution.abandoned_queries.total_count
        CanceledQueries.OneMinute.Count:
          alias: presto.execution.canceled_queries.one_minute.count
        CanceledQueries.OneMinute.Rate:
          alias: presto.execution.canceled_queries.one_minute.rate
        CanceledQueries.TotalCount:
          alias: presto.execution.canceled_queries.total_count
        CompletedQueries.OneMinute.Count:
          alias: presto.execution.completed_queries.one_minute.count
        CompletedQueries.OneMinute.Rate:
          alias: presto.execution.completed_queries.one_minute.rate
        CompletedQueries.TotalCount:
          alias: presto.execution.completed_queries.total_count
        ConsumedCpuTimeSecs.OneMinute.Count:
          alias: presto.execution.consumed_cpu_time_secs.one_minute.count
        ConsumedCpuTimeSecs.OneMinute.Rate:
          alias: presto.execution.consumed_cpu_time_secs.one_minute.rate
        ConsumedCpuTimeSecs.TotalCount:
          alias: presto.execution.consumed_cpu_time_secs.total_count
        CpuInputByteRate.AllTime.Avg:
          alias: presto.execution.cpu_input_byte_rate.all_time.avg
        CpuInputByteRate.AllTime.P75:
          alias: presto.execution.cpu_input_byte_rate.all_time.p75
        CpuInputByteRate.AllTime.P95:
          alias: presto.execution.cpu_input_byte_rate.all_time.p95
        CpuInputByteRate.OneMinute.Avg:
          alias: presto.execution.cpu_input_byte_rate.one_minute.avg
        CpuInputByteRate.OneMinute.Count:
          alias: presto.execution.cpu_input_byte_rate.one_minute.count
        CpuInputByteRate.OneMinute.Max:
          alias: presto.execution.cpu_input_byte_rate.one_minute.max
        CpuInputByteRate.OneMinute.Min:
          alias: presto.execution.cpu_input_byte_rate.one_minute.min
        CpuInputByteRate.OneMinute.P75:
          alias: presto.execution.cpu_input_byte_rate.one_minute.p75
        CpuInputByteRate.OneMinute.P95:
          alias: presto.execution.cpu_input_byte_rate.one_minute.p95
        CpuInputByteRate.OneMinute.Total:
          alias: presto.execution.cpu_input_byte_rate.one_minute.total
        ExecutionTime.AllTime.Avg:
          alias: presto.execution.execution_time.all_time.avg
        ExecutionTime.AllTime.Count:
          alias: presto.execution.execution_time.all_time.count
        ExecutionTime.AllTime.Max:
          alias: presto.execution.execution_time.all_time.max
        ExecutionTime.AllTime.Min:
          alias: presto.execution.execution_time.all_time.min
        ExecutionTime.AllTime.P75:
          alias: presto.execution.execution_time.all_time.p75
        ExecutionTime.AllTime.P95:
          alias: presto.execution.execution_time.all_time.p95
        ExecutionTime.OneMinute.Avg:
          alias: presto.execution.execution_time.one_minute.avg
        ExecutionTime.OneMinute.Max:
          alias: presto.execution.execution_time.one_minute.max
        ExecutionTime.OneMinute.Min:
          alias: presto.execution.execution_time.one_minute.min
        ExecutionTime.OneMinute.P75:
          alias: presto.execution.execution_time.one_minute.p75
        ExecutionTime.OneMinute.P95:
          alias: presto.execution.execution_time.one_minute.p95
        Executor.ActiveCount:
          alias: presto.execution.executor.active_count
        Executor.CompletedTaskCount:
          alias: presto.execution.executor.completed_task_count
        Executor.CorePoolSize:
          alias: presto.execution.executor.core_pool_size
        Executor.PoolSize:
          alias: presto.execution.executor.pool_size
        Executor.QueuedTaskCount:
          alias: presto.execution.executor.queued_task_count
        Executor.TaskCount:
          alias: presto.execution.executor.task_count
        ExternalFailures.OneMinute.Count:
          alias: presto.execution.external_failures.one_minute.count
        ExternalFailures.OneMinute.Rate:
          alias: presto.execution.external_failures.one_minute.rate
        ExternalFailures.TotalCount:
          alias: presto.execution.external_failures.total_count
        FailedQueries.OneMinute.Count:
          alias: presto.execution.failed_queries.one_minute.count
        FailedQueries.OneMinute.Rate:
          alias: presto.execution.failed_queries.one_minute.rate
        FailedQueries.TotalCount:
          alias: presto.execution.failed_queries.total_count
        InsufficientResourcesFailures.OneMinute.Count:
          alias: presto.execution.insufficient_resources_failures.one_minute.count
        InsufficientResourcesFailures.OneMinute.Rate:
          alias: presto.execution.insufficient_resources_failures.one_minute.rate
        InsufficientResourcesFailures.TotalCount:
          alias: presto.execution.insufficient_resources_failures.total_count
        InternalFailures.OneMinute.Count:
          alias: presto.execution.internal_failures.one_minute.count
        InternalFailures.OneMinute.Rate:
          alias: presto.execution.internal_failures.one_minute.rate
        InternalFailures.TotalCount:
          alias: presto.execution.internal_failures.total_count
        ManagementExecutor.ActiveCount:
          alias: presto.execution.management_executor.active_count
        ManagementExecutor.CompletedTaskCount:
          alias: presto.execution.management_executor.completed_task_count
        ManagementExecutor.QueuedTaskCount:
          alias: presto.execution.management_executor.queued_task_count
        RunningQueries:
          alias: presto.execution.running_queries
        StartedQueries.OneMinute.Count:
          alias: presto.execution.started_queries.one_minute.count
        StartedQueries.OneMinute.Rate:
          alias: presto.execution.started_queries.one_minute.rate
        StartedQueries.TotalCount:
          alias: presto.execution.started_queries.total_count
        UserErrorFailures.OneMinute.Count:
          alias: presto.execution.user_error_failures.one_minute.count
        UserErrorFailures.OneMinute.Rate:
          alias: presto.execution.user_error_failures.one_minute.rate
        UserErrorFailures.TotalCount:
          alias: presto.execution.user_error_failures.total_count
        WallInputBytesRate.OneMinute.Avg:
          alias: presto.execution.wall_input_bytes_rate.one_minute.avg
        WallInputBytesRate.OneMinute.Max:
          alias: presto.execution.wall_input_bytes_rate.one_minute.max
        WallInputBytesRate.OneMinute.Min:
          alias: presto.execution.wall_input_bytes_rate.one_minute.min
        WallInputBytesRate.OneMinute.P75:
          alias: presto.execution.wall_input_bytes_rate.one_minute.p75
        WallInputBytesRate.OneMinute.P95:
          alias: presto.execution.wall_input_bytes_rate.one_minute.p95
      bean: presto.execution:name=QueryManager
  - include:
      attribute:
        BlockedSplits:
          alias: presto.execution.executor.blocked_splits
        ProcessorExecutor.QueuedTaskCount:
          alias: presto.execution.executor.processor_executor.queued_task_count
        RunningSplits:
          alias: presto.execution.executor.running_splits
        TotalSplits:
          alias: presto.execution.executor.total_splits
        WaitingSplits:
          alias: presto.execution.executor.waiting_splits
      bean: presto.execution.executor:name=TaskExecutor
  - include:
      attribute:
        InputDataSize.OneMinute.Count:
          alias: presto.execution.input_data_size.one_minute.count
        InputDataSize.OneMinute.Rate:
          alias: presto.execution.input_data_size.one_minute.rate
        InputDataSize.TotalCount:
          alias: presto.execution.input_data_size.total_count
        InputPositions.OneMinute.Count:
          alias: presto.execution.input_positions.one_minute.count
        InputPositions.OneMinute.Rate:
          alias: presto.execution.input_positions.one_minute.rate
        InputPositions.TotalCount:
          alias: presto.execution.input_positions.total_count
        OutputDataSize.OneMinute.Count:
          alias: presto.execution.output_data_size.one_minute.count
        OutputDataSize.OneMinute.Rate:
          alias: presto.execution.output_data_size.one_minute.rate
        OutputDataSize.TotalCount:
          alias: presto.execution.output_data_size.total_count
        OutputPositions.OneMinute.Count:
          alias: presto.execution.output_positions.one_minute.count
        OutputPositions.OneMinute.Rate:
          alias: presto.execution.output_positions.one_minute.rate
        OutputPositions.TotalCount:
          alias: presto.execution.output_positions.total_count
        TaskNotificationExecutor.ActiveCount:
          alias: presto.execution.task_notification_executor.active_count
        TaskNotificationExecutor.CompletedTaskCount:
          alias: presto.execution.task_notification_executor.completed_task_count
        TaskNotificationExecutor.PoolSize:
          alias: presto.execution.task_notification_executor.pool_size
        TaskNotificationExecutor.QueuedTaskCount:
          alias: presto.execution.task_notification_executor.queued_task_count
      bean: presto.execution:name=TaskManager
  - include:
      attribute:
        ActiveCount:
          alias: presto.failure_detector.active_count
      bean:
      - presto.failureDetector:name=HeartbeatFailureDetector
  - include:
      attribute:
        AssignedQueries:
          alias: presto.memory.assigned_queries
        BlockedNodes:
          alias: presto.memory.blocked_nodes
        ClusterMemoryBytes:
          alias: presto.memory.cluster_memory_bytes
        FreeBytes:
          alias: presto.memory.free_bytes
        FreeDistributedBytes:
          alias: presto.memory.free_distributed_bytes
        MaxBytes:
          alias: presto.memory.max_bytes
        Nodes:
          alias: presto.memory.nodes
        ReservedBytes:
          alias: presto.memory.reserved_bytes
        ReservedDistributedBytes:
          alias: presto.memory.reserved_distributed_bytes
        ReservedRevocableBytes:
          alias: presto.memory.reserved_revocable_bytes
        ReservedRevocableDistributedBytes:
          alias: presto.memory.reserved_revocable_distributed_bytes
        TotalDistributedBytes:
          alias: presto.memory.total_distributed_bytes
      domain: presto.memory
  is_jmx: true
instances:
- host: '%%host%%'
  port: '%%port%%'
logs_config: null
Auto-discovery IDs: _containerd
Templates:
check_name: containerd
init_config: null
instances:
- collect_events: true
  filters:
  - topic=="/containers/create"
  - topic=="/containers/delete"
  - topic=="/containers/update"
  - topic=="/images/update"
  - topic=="/images/create"
  - topic=="/images/delete"
  - topic=="/tasks/oom"
  - topic=="/tasks/delete"
logs_config: null
Auto-discovery IDs: _cri
Templates:
check_name: cri
init_config: null
instances:
- {}
logs_config: null
Auto-discovery IDs: consul
Templates:
check_name: consul
init_config: null
instances:
- catalog_checks: true
  new_leader_checks: true
  url: http://%%host%%:8500
logs_config: null
Auto-discovery IDs: kube-scheduler
Templates:
check_name: kube_scheduler
init_config: null
instances:
- bearer_token_auth: tls_only
  possible_prometheus_urls:
  - https://%%host%%:10259/metrics
  - https://localhost:10259/metrics
  - http://%%host%%:10251/metrics
  - http://localhost:10251/metrics
  ssl_verify: false
logs_config: null
Auto-discovery IDs: kyototycoon
Templates:
check_name: kyototycoon
init_config: null
instances:
- report_url: http://%%host%%:1978/rpc/report
logs_config: null
Auto-discovery IDs: snmp
Templates:
check_name: snmp
init_config: null
instances:
- authKey: ********
  authProtocol: '%%extra_auth_protocol%%'
  collect_device_metadata: '%%extra_collect_device_metadata%%'
  community_string: ********
  context_engine_id: '%%extra_context_engine_id%%'
  context_name: '%%extra_context_name%%'
  extra_min_collection_interval: '%%extra_min_collection_interval%%'
  extra_tags: '%%extra_tags%%'
  ip_address: '%%host%%'
  loader: '%%extra_loader%%'
  namespace: '%%extra_namespace%%'
  oid_batch_size: '%%extra_oid_batch_size%%'
  port: '%%port%%'
  privKey: ********
  privProtocol: '%%extra_priv_protocol%%'
  retries: '%%extra_retries%%'
  snmp_version: '%%extra_version%%'
  tags:
  - autodiscovery_subnet:%%extra_autodiscovery_subnet%%
  timeout: '%%extra_timeout%%'
  use_device_id_as_hostname: '%%extra_use_device_id_as_hostname%%'
  user: '%%extra_user%%'
logs_config: null
Auto-discovery IDs: cluster-agent
Templates:
check_name: datadog_cluster_agent
init_config: null
instances:
- prometheus_url: http://%%host%%:5000/metrics
logs_config: null
Auto-discovery IDs: docker://510637a081cb2976e32d893402e782eb490db718b0329ccfb250c1c0f2987e55
Templates:
check_name: openmetrics
init_config: {}
instances:
- metrics:
  - promhttp_metric_handler_requests_total: prometheus.handler.requests.total
  - go*
  - prometheus_tsdb*
  namespace: namespace1
  prometheus_url: http://%%host%%:%%port%%/metrics
logs_config: null
Auto-discovery IDs: etcd
Templates:
check_name: etcd
init_config: null
instances:
- possible_prometheus_urls:
  - https://%%host%%:2379/metrics
  - http://%%host%%:2379/metrics
  ssl_verify: false
logs_config: null
Auto-discovery IDs: _container
Templates:
check_name: container
init_config: null
instances:
- {}
logs_config: null
Auto-discovery IDs: kube-controller-manager
Templates:
check_name: kube_controller_manager
init_config: null
instances:
- bearer_token_auth: tls_only
  possible_prometheus_urls:
  - https://%%host%%:10257/metrics
  - https://localhost:10257/metrics
  - http://%%host%%:10252/metrics
  - http://localhost:10252/metrics
  ssl_verify: false
logs_config: null
Auto-discovery IDs: docker://d40b0762921faed13cafd98d517a8857fffe964c889e1fe1ed11f6bf7bf00ffb
Templates:
check_name: openmetrics
init_config: {}
instances:
- metrics:
  - promhttp_metric_handler_requests_total: prometheus.handler.requests.total
  - go*
  - prometheus_tsdb*
  namespace: namespace1
  prometheus_url: http://%%host%%:%%port%%/metrics
logs_config: null
Auto-discovery IDs: redis
Templates:
check_name: redisdb
init_config: null
instances:
- host: '%%host%%'
  port: 6379
logs_config: null
Auto-discovery IDs: _eks_fargate
Templates:
check_name: eks_fargate
init_config: null
instances:
- {}
logs_config: null
Auto-discovery IDs: couchdb
Templates:
check_name: couch
init_config: null
instances:
- server: http://%%host%%:5984
logs_config: null
Auto-discovery IDs: docker://8e17525d6576b415aa227aaa3a39c24790263cd0f67abea407a839ccdf158159
Templates:
check_name: openmetrics
init_config: {}
instances:
- prometheus_url: http://%%host%%:%%port%%/metrics
logs_config: null
Auto-discovery IDs: docker://46ae29ac153166a0a4ccaed4b46226bb7f6b7ec22d71503553bd451b0da8abe7
Templates:
check_name: openmetrics
init_config: {}
instances:
- prometheus_url: http://%%host%%:%%port%%/metrics
logs_config: null
Auto-discovery IDs: elasticsearch,elasticsearch-oss
Templates:
check_name: elastic
init_config: null
instances:
- url: http://%%host%%:9200
logs_config: null
Auto-discovery IDs: kube-state-metrics
Templates:
check_name: kubernetes_state
init_config: null
instances:
- kube_state_url: http://%%host%%:8080/metrics
logs_config: null
Auto-discovery IDs: kubedns-amd64,k8s-dns-kube-dns-amd64
Templates:
check_name: kube_dns
init_config: null
instances:
- prometheus_endpoint: http://%%host%%:10055/metrics
  tags:
  - dns-pod:%%host%%
logs_config: null
Auto-discovery IDs: memcached
Templates:
check_name: mcache
init_config: null
instances:
- port: 11211
  url: '%%host%%'
logs_config: null
Auto-discovery IDs: _docker
Templates:
check_name: docker
init_config: null
instances:
- {}
logs_config: null
Auto-discovery IDs: _ecs_fargate
Templates:
check_name: ecs_fargate
init_config: null
instances:
- min_collection_interval: 20
logs_config: null
Auto-discovery IDs: couchbase
Templates:
check_name: couchbase
init_config: null
instances:
- server: http://%%host%%:8091
logs_config: null
Auto-discovery IDs: tomcat
Templates:
check_name: tomcat
init_config:
  collect_default_metrics: true
  conf:
  - include:
      attribute:
        currentThreadCount:
          alias: tomcat.threads.count
          metric_type: gauge
        currentThreadsBusy:
          alias: tomcat.threads.busy
          metric_type: gauge
        maxThreads:
          alias: tomcat.threads.max
          metric_type: gauge
      domain: Catalina
      type: ThreadPool
  - include:
      attribute:
        bytesReceived:
          alias: tomcat.bytes_rcvd
          metric_type: counter
        bytesSent:
          alias: tomcat.bytes_sent
          metric_type: counter
        errorCount:
          alias: tomcat.error_count
          metric_type: counter
        maxTime:
          alias: tomcat.max_time
          metric_type: gauge
        processingTime:
          alias: tomcat.processing_time
          metric_type: counter
        requestCount:
          alias: tomcat.request_count
          metric_type: counter
      domain: Catalina
      type: GlobalRequestProcessor
  - include:
      attribute:
        errorCount:
          alias: tomcat.servlet.error_count
          metric_type: counter
        processingTime:
          alias: tomcat.servlet.processing_time
          metric_type: counter
        requestCount:
          alias: tomcat.servlet.request_count
          metric_type: counter
      domain: Catalina
      j2eeType: Servlet
  - include:
      attribute:
        accessCount:
          alias: tomcat.cache.access_count
          metric_type: counter
        hitsCounts:
          alias: tomcat.cache.hits_count
          metric_type: counter
      domain: Catalina
      type: Cache
  - include:
      attribute:
        accessCount:
          alias: tomcat.string_cache.access_count
          metric_type: counter
        hitCount:
          alias: tomcat.string_cache.hit_count
          metric_type: counter
      domain: Catalina
      type: StringCache
  - include:
      attribute:
        hitCount:
          alias: tomcat.web.cache.hit_count
          metric_type: counter
        lookupCount:
          alias: tomcat.web.cache.lookup_count
          metric_type: counter
      domain: Catalina
      name: Cache
      type: WebResourceRoot
  - include:
      attribute:
        jspCount:
          alias: tomcat.jsp.count
          metric_type: counter
        jspReloadCount:
          alias: tomcat.jsp.reload_count
          metric_type: counter
      domain: Catalina
      type: JspMonitor
  is_jmx: true
instances:
- host: '%%host%%'
  port: "9012"
logs_config: null
Auto-discovery IDs: nginx-photon
Templates:
check_name: harbor
init_config: null
instances:
- password: ********
  url: http://%%host%%/
  username: <USERNAME>
logs_config: null
Auto-discovery IDs: cilium-agent,cilium
Templates:
check_name: cilium
init_config: null
instances:
- agent_endpoint: http://%%host%%:9090/metrics
  tags:
  - cilium-pod:%%host%%
logs_config: null
Auto-discovery IDs: coredns
Templates:
check_name: coredns
init_config: null
instances:
- prometheus_url: http://%%host%%:9153/metrics
  tags:
  - dns-pod:%%host%%
logs_config: null
Auto-discovery IDs: external-dns
Templates:
check_name: external_dns
init_config: null
instances:
- prometheus_url: http://%%host%%:7979/metrics
  tags:
  - externaldns-pod:%%host%%
logs_config: null
Auto-discovery IDs: httpd
Templates:
check_name: apache
init_config: null
instances:
- apache_status_url: http://%%host%%/server-status?auto
logs_config: null
Auto-discovery IDs: riak
Templates:
check_name: riak
init_config: null
instances:
- url: http://%%host%%:8098/stats
logs_config: null
Auto-discovery IDs: _kubelet
Templates:
check_name: kubelet
init_config: null
instances:
- min_collection_interval: 20
logs_config: null
Auto-discovery IDs: kube-apiserver
Templates:
check_name: kube_apiserver_metrics
init_config: null
instances:
- bearer_token_auth: tls_only
  possible_prometheus_urls:
  - https://%%host%%:6443/metrics
  - https://%%host%%:8443/metrics
  tags:
  - apiserver:%%host%%
logs_config: null
Auto-discovery IDs: proxyv2
Templates:
check_name: istio
init_config: null
instances:
- exclude_labels:
  - source_version
  - destination_version
  - source_canonical_revision
  - destination_canonical_revision
  - source_principal
  - destination_principal
  - source_cluster
  - destination_cluster
  - source_canonical_service
  - destination_canonical_service
  - source_workload_namespace
  - destination_workload_namespace
  - request_protocol
  - connection_security_policy
  istio_mesh_endpoint: http://%%host%%:15090/stats/prometheus
  send_histograms_buckets: true
logs_config: null